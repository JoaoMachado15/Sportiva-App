import{a as B,c as D,e as H,g as q,i as z}from"./chunk-T6CVNIJP.js";import{a as L,b as F}from"./chunk-YT5JGGFD.js";import{D as _,F as E,ca as T,da as w,ea as R,fa as A,ga as M,h as c,ha as P,i as g,j as b,k as x,l as d,m as o,n as t,o as h,pa as Q,r as S,s as p,t as f,u,va as j,w as r,wa as O,x as v,xa as k,y as I}from"./chunk-DFIW5OGI.js";import"./chunk-4C747BK3.js";import"./chunk-7KGURMOZ.js";import"./chunk-COTEFVJM.js";import"./chunk-N36FF4D7.js";import"./chunk-TAHSMARZ.js";import"./chunk-BUMCRR6Y.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as y,b as C}from"./chunk-B7O3QC5Z.js";function N(e,a,l){l&&l.destroy();let i={};return a.forEach(s=>{let n=new Date(s.date).toLocaleString("default",{month:"short"});i[n]=(i[n]||0)+1}),new q(e,{type:"bar",data:{labels:Object.keys(i),datasets:[{label:"Activities",data:Object.values(i),backgroundColor:"#3b82f6"}]}})}var V=["timeChart"],G=["monthChart"];function W(e,a){e&1&&(o(0,"ion-card")(1,"ion-card-content",3)(2,"ion-text"),r(3," No statistics yet. "),t(),o(4,"p"),r(5,"Add your first activity to see statistics."),t()()())}function J(e,a){if(e&1&&(o(0,"ion-grid")(1,"ion-row")(2,"ion-col",4)(3,"ion-card")(4,"ion-card-content")(5,"ion-text"),r(6,"Total activities"),t(),o(7,"h2"),r(8),t()()()(),o(9,"ion-col",4)(10,"ion-card")(11,"ion-card-content")(12,"ion-text"),r(13,"Total time"),t(),o(14,"h2"),r(15),t()()()(),o(16,"ion-col",5)(17,"ion-card")(18,"ion-card-content")(19,"ion-text"),r(20,"Most practiced sport"),t(),o(21,"h2"),r(22),t()()()()()()),e&2){let l=S();c(8),v(l.totalActivities),c(7),I("",l.totalHours," h"),c(7),v(l.mostPracticedSport)}}function K(e,a){e&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-text",6),r(3,"Time by sport"),t(),h(4,"canvas",null,0),t()())}function U(e,a){e&1&&(o(0,"ion-card")(1,"ion-card-content")(2,"ion-text",6),r(3,"Activities per month"),t(),h(4,"canvas",null,1),t()())}var lt=(()=>{let a=class a{constructor(i){this.service=i,this.activities=[],this.sportLabels=L.reduce((s,n)=>C(y({},s),{[n.value]:n.label}),{})}ionViewWillEnter(){this.service.activities.subscribe(i=>{this.activities=i,setTimeout(()=>this.buildCharts())})}buildCharts(){this.timeChartRef&&(this.timeChart=z(this.timeChartRef.nativeElement,this.activities,this.sportLabels,this.timeChart)),this.monthChartRef&&(this.monthChart=N(this.monthChartRef.nativeElement,this.activities,this.monthChart))}get totalActivities(){return D(this.activities)}get totalHours(){return(B(this.activities)/60).toFixed(1)}get mostPracticedSport(){let i=H(this.activities);return i?this.sportLabels[i]:"\u2014"}};a.\u0275fac=function(s){return new(s||a)(g(F))},a.\u0275cmp=b({type:a,selectors:[["app-statistics"]],viewQuery:function(s,n){if(s&1&&(p(V,5),p(G,5)),s&2){let m;f(m=u())&&(n.timeChartRef=m.first),f(m=u())&&(n.monthChartRef=m.first)}},decls:9,vars:4,consts:[["timeChart",""],["monthChart",""],[4,"ngIf"],[1,"empty-state"],["size","6"],["size","12"],[1,"section-title"]],template:function(s,n){s&1&&(o(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),r(3,"Statistics"),t()()(),o(4,"ion-content"),x(5,W,6,0,"ion-card",2)(6,J,23,3,"ion-grid",2)(7,K,6,0,"ion-card",2)(8,U,6,0,"ion-card",2),t()),s&2&&(c(5),d("ngIf",!n.activities.length),c(),d("ngIf",n.activities.length),c(),d("ngIf",n.activities.length),c(),d("ngIf",n.activities.length))},dependencies:[E,_,A,P,O,k,T,w,M,Q,R,j],encapsulation:2});let e=a;return e})();export{lt as StatisticsPage};
