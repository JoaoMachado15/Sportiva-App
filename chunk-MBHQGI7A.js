import{a as Y,b as Z,f as tt,g as et}from"./chunk-GK7HOUNB.js";import{a as I,b as nt,c as ot}from"./chunk-5XWOGJG5.js";import{b as it}from"./chunk-YT5JGGFD.js";import{Aa as K,Ba as Q,C as E,D as T,Da as U,F as D,Fa as W,Ga as X,J as k,K as F,O,aa as P,ba as V,f as u,fa as L,g as v,h as c,ha as $,i as g,ia as j,j as y,ja as B,k as f,ka as M,l as m,la as R,m as n,ma as N,n as o,na as z,o as S,p as C,q as p,qa as H,r as d,ra as q,w as s,wa as G,x as b,xa as J,y as w,z as A}from"./chunk-DFIW5OGI.js";import"./chunk-4C747BK3.js";import"./chunk-7KGURMOZ.js";import"./chunk-COTEFVJM.js";import"./chunk-N36FF4D7.js";import"./chunk-TAHSMARZ.js";import"./chunk-BUMCRR6Y.js";import"./chunk-DNTR6X5U.js";import"./chunk-4WFVMWDK.js";import"./chunk-M2X7KQLB.js";import"./chunk-DVVH2KKN.js";import"./chunk-NV3QH4JK.js";import"./chunk-XO2KZLEH.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{h as x}from"./chunk-B7O3QC5Z.js";function rt(l,a,i){let t=[...l];return a==="favorites"&&(t=t.filter(e=>e.favorite)),a==="sport"&&i&&(t=t.filter(e=>e.sport===i)),t}function lt(l,a){return[...l].sort((i,t)=>{switch(a){case"date-desc":return new Date(t.date).getTime()-new Date(i.date).getTime();case"date-asc":return new Date(i.date).getTime()-new Date(t.date).getTime();case"duration":return t.duration-i.duration;case"intensity":{let e={low:1,moderate:2,high:3};return e[t.intensity]-e[i.intensity]}default:return 0}})}function at(l,a){if(l&1&&(n(0,"ion-select-option",17),s(1),o()),l&2){let i=a.$implicit,t=d(2);m("value",i),c(),w(" ",t.sportLabels[i]," ")}}function st(l,a){if(l&1){let i=C();n(0,"ion-item")(1,"ion-label"),s(2,"Sport"),o(),n(3,"ion-select",15),p("ionChange",function(e){u(i);let r=d();return v(r.onSportChange(e))}),f(4,at,2,2,"ion-select-option",16),o()()}if(l&2){let i=d();c(3),m("value",i.selectedSport),c(),m("ngForOf",i.sports)}}function ct(l,a){if(l&1){let i=C();n(0,"ion-item-sliding")(1,"ion-item",18),p("click",function(){let e=u(i).$implicit,r=d();return v(r.openDetails(e.id))}),n(2,"ion-button",19),p("click",function(e){let r=u(i).$implicit,_=d();return v(_.toggleFavorite(r.id,e))}),S(3,"ion-icon",20),o(),n(4,"ion-label")(5,"h2"),s(6),o(),n(7,"p"),s(8),o()(),n(9,"ion-button",21),p("click",function(e){let r=u(i).$implicit,_=d();return v(_.editActivity(r.id,e))}),s(10," Edit "),o()(),n(11,"ion-item-options",22)(12,"ion-item-option",23),p("click",function(){let e=u(i).$implicit,r=d();return v(r.confirmDelete(e.id))}),s(13," Delete "),o()()()}if(l&2){let i=a.$implicit,t=d();c(3),m("name",i.favorite?"star":"star-outline"),c(3),b(t.sportLabels[i.sport]),c(2),A(" ",i.duration," min \u2022 ",i.date," ")}}var bt=(()=>{let a=class a{constructor(t,e,r,_){this.service=t,this.alertCtrl=e,this.toastCtrl=r,this.router=_,this.activities=[],this.filter="all",this.sort="date-desc",this.sports=Object.keys(I),this.sportLabels=I,Y({addCircleOutline:Z,star:tt,starOutline:et})}ngOnInit(){this.service.activities.subscribe(t=>{this.activities=t})}openDetails(t){this.router.navigate(["/tabs/activity",t])}editActivity(t,e){e.stopPropagation(),this.router.navigate(["/tabs/edit-activity",t])}toggleFavorite(t,e){e.stopPropagation(),this.service.toggleFavorite(t)}confirmDelete(t){return x(this,null,function*(){yield nt(this.alertCtrl,()=>x(this,null,function*(){this.service.delete(t),yield ot(this.toastCtrl,"top")}))})}get filteredActivities(){let t=rt(this.activities,this.filter,this.selectedSport);return lt(t,this.sort)}onFilterChange(t){this.filter=t.detail.value,this.filter!=="sport"&&(this.selectedSport=void 0)}onSortChange(t){this.sort=t.detail.value}onSportChange(t){this.selectedSport=t.detail.value}};a.\u0275fac=function(e){return new(e||a)(g(it),g(K),g(Q),g(k))},a.\u0275cmp=y({type:a,selectors:[["app-activities"]],decls:33,vars:4,consts:[["slot","end"],["routerLink","/tabs/add-activity"],["name","add-circle-outline","size","large"],["mode","md"],["mode","md",1,"activity-filter",3,"ionChange","value"],["value","all"],["value","favorites"],["value","sport"],["interface","popover",3,"ionChange","value"],["value","date-desc"],["value","date-asc"],["value","intensity"],["value","duration"],[4,"ngIf"],[4,"ngFor","ngForOf"],["interface","popover","placeholder","Select sport",3,"ionChange","value"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["button","","detail","",3,"click"],["slot","start","fill","clear",3,"click"],[3,"name"],["slot","end","fill","clear",3,"click"],["side","end"],["color","danger",3,"click"]],template:function(e,r){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Activities"),o(),n(4,"ion-buttons",0)(5,"ion-button",1),S(6,"ion-icon",2),o()()()(),n(7,"ion-content",3)(8,"ion-segment",4),p("ionChange",function(h){return r.onFilterChange(h)}),n(9,"ion-segment-button",5)(10,"ion-label"),s(11,"All"),o()(),n(12,"ion-segment-button",6)(13,"ion-label"),s(14,"Favorites"),o()(),n(15,"ion-segment-button",7)(16,"ion-label"),s(17,"Sport"),o()()(),n(18,"ion-item")(19,"ion-label"),s(20,"Sort by"),o(),n(21,"ion-select",8),p("ionChange",function(h){return r.onSortChange(h)}),n(22,"ion-select-option",9),s(23," Date (newest) "),o(),n(24,"ion-select-option",10),s(25," Date (oldest) "),o(),n(26,"ion-select-option",11),s(27," Intensity "),o(),n(28,"ion-select-option",12),s(29," Duration "),o()()(),f(30,st,5,2,"ion-item",13),n(31,"ion-list"),f(32,ct,14,4,"ion-item-sliding",14),o()()),e&2&&(c(8),m("value",r.filter),c(13),m("value",r.sort),c(9),m("ngIf",r.filter==="sport"),c(2),m("ngForOf",r.filteredActivities))},dependencies:[D,E,T,O,F,L,$,G,J,V,z,j,N,U,P,R,M,B,W,H,X,q],encapsulation:2});let l=a;return l})();export{bt as ActivitiesPage};
